<?xml version='1.0'?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
    <!ENTITY rfc2119 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml'>
    <!ENTITY rfc5730 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5730.xml'>
    <!ENTITY rfc5731 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5731.xml'>
    <!ENTITY rfc3629 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3629.xml'>
    <!ENTITY rfc2781 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2781.xml'>
    <!ENTITY w3crec-xml-20040204 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml4/reference.W3C.REC-xml-20040204.xml'>
    <!ENTITY w3crec-xmlschema-1-20041028 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml4/reference.W3C.REC-xmlschema-1-20041028.xml'>
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<?rfc private='EPP Key-Value Mapping'?>

<?rfc compact='yes'?>
<?rfc subcompact='no'?>

<?rfc docmapping='yes'?>
<?rfc editing='no'?>
<?rfc strict='yes'?>
<?rfc symrefs='yes'?>

<?rfc toc='yes'?>
<?rfc tocindent='yes'?>
<rfc>
  <front>
    <title abbrev="EPP Key-Value Mapping">Key-Value Mapping for the Extensible
      Provisioning Protocol (EPP)
    </title>
    <author initials='J.' surname='Mitchell' fullname='James Mitchell'>
      <organization>AusRegistry Pty Ltd</organization>
      <address>
        <email>support@ausregistry.com.au</email>
      </address>
    </author>
    <date month='September' year='2010' />
    <abstract>
      <t>This document describes an Extensible Provisioning Protocol
        (EPP) extension mapping for the transport of arbitrary data
        associated with domain names stored in a shared central
        repository.
      </t>
    </abstract>
    <note title="Status of This Document">
      <t>This document specifies an extension to the EPP protocol first
        implemented in AusRegistry's Domain Name Registry EPP service.
        Discussion and suggestions for improvements are welcome. Please
        refer to AusRegistry for more information on the status of this
        document. Distribution of this document and use of the protocol
        extensions defined within is unrestricted and unlimited.
      </t>
    </note>
    <note title="Copyright Notice">
      <t>Copyright (C) AusRegistry International Pty Ltd (2010)
      </t>
    </note>
  </front>
  <middle>
    <section title='Introduction' anchor="Intro" toc="default">
      <t>
        This document describes an domain mapping for version 1.0 of
        the
        Extensible Provisioning Protocol (EPP) that allows for the
        transport of arbitrary data associated with a domain name. This
        mapping, an extension of the domain name mapping described in
        <xref target="RFC5731" />, is specified using the Extensible Markup Language
        (XML) 1.0, as
        described in
        <xref target="W3C.REC-xml-20040204" />, and XML
        Schema notation, as described in
        <xref target="W3C.REC-xmlschema-1-20041028" />
        and [W3C.REC-xmlschema-2-20041028].
      </t>
      <t>
        The EPP core protocol specification
        <xref target="RFC5730" />
        provides a
        complete description of EPP command and response
        structures. A
        thorough understanding of the base protocol and
        specification of
        relevant extensions is necessary to understand the
        mapping
        described in this document.
      </t>
      <section title="Conventions Used In This Document">
        <t>
          The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
          NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
          "OPTIONAL" in this document are to be interpreted as described
          in
          <xref target="RFC2119" />
          .
        </t>
        <t>In examples, "C:" represents lines sent by a protocol client
          and "S:" represents lines returned by a protocol server.
          Indentation and white space in examples are provided only to
          illustrate element relationships and are not a REQUIRED
          feature of this protocol.
        </t>
      </section>
    </section>
    <section title="EPP Command Mapping" toc="default">
      <t>
        A detailed description of the EPP syntax and semantics can be
        found in the EPP core protocol specification
        <xref target="RFC5730" />
        . The
        command mappings described here are specifically for use in
        provisioning and managing generic domain extensions via EPP.
      </t>
      <section title="EPP Query Commands" toc="default">
        <t>EPP provides three commands to retrieve object information:
          &lt;check&gt; to determine if an object is known to the
          server, &lt;info&gt; to retrieve detailed information
          associated with an object, and &lt;transfer&gt; to retrieve
          object transfer status information.
        </t>
        <section title="EPP &lt;check&gt; Command" toc="default">
          <t>This
            extension does not add any elements to the EPP
            &lt;check&gt;
            command or &lt;check&gt; response described in
            the EPP domain
            mapping
            <xref target="RFC5731" />
            .
          </t>
        </section>
        <section title="EPP &lt;info&gt; Command" toc="default">
          <t>This
            extension does not add any elements to the EPP
            &lt;info&gt;
            command described in the EPP domain mapping
            <xref target="RFC5731" />.
            However, additional elements are defined for the
            &lt;info&gt; response.
          </t>
          <t>When
            an &lt;info&gt; command has been processed successfully, the
            EPP &lt;resData&gt; element MUST contain child elements as
            described in the EPP domain mapping
            <xref target="RFC5731" />.
            In addition,
            the EPP &lt;extension&gt; element MUST contain
            an
            &lt;infData&gt; element identifying the kv namespace. The
            &lt;infData&gt; element contains the following child
            elements:
            <list style="symbols">
              <t>One or more &lt;kvlist&gt; elements that contain a list
                of key-value items that are associated with the
                specified domain. A MANDATORY "name" attribute MUST be
                present to identify the name of the key-value list.
              </t>
            </list>
          </t>
          <t>The
            &lt;kvlist&gt; element contains the following child
            elements:
            <list style="symbols">
              <t>One or more &lt;item&gt; elements that contain the
                value of an item in the list. A MANDATORY "key"
                attribute MUST be present to indicate the key for the
                specified item.
              </t>
            </list>
          </t>
          <figure>
            <preamble>Example &lt;info&gt; response:</preamble>
            <artwork><![CDATA[
C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0" 
C:  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
C:  xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0 epp-1.0.xsd">
C:  <response>
C:    <result code="1000">
C:      <msg lang="en">Command completed successfully</msg>
C:    </result>
C:    <resData>
C:      <infData xmlns="urn:ietf:params:xml:ns:domain-1.0"
C:        xsi:schemaLocation=
C:           "urn:ietf:params:xml:ns:domain-1.0 domain-1.0.xsd">
C:        <name>example.com.au</name>
C:        <roid>D0001337-AR</roid>
C:        <status s="ok" />
C:        <registrant>Registrant</registrant>
C:        <contact type="tech">TECH-1</contact>
C:        <clID>Client1</clID>
C:        <crID>Client2</crID>
C:        <crDate>2010-09-02T04:26:42.0Z</crDate>
C:        <exDate>2012-09-02T04:26:42.0Z</exDate>
C:        <authInfo>
C:          <pw>123paSSword</pw>
C:        </authInfo>
C:      </infData>
C:    </resData>
C:    <extension>
C:      <infData xmlns="urn:X-ar:params:xml:ns:kv-1.0">
C:        <kvlist name="au">
C:          <item key="eligibilityType">Company</item>
C:          <item key="policyReason">1</item>
C:          <item key="registrantIDType">ACN</item>
C:          <item key="registrantIDValue">123456789</item>
C:        </kvlist>
C:      </infData>
C:    </extension>
C:    <trID>
C:      <clTRID>ABC12345</clTRID>
C:      <svTRID>XYZ54321</svTRID>
C:    </trID>
C:  </response>
C:</epp>
              ]]></artwork>
          </figure>
        </section>
        <section title="EPP &lt;transfer&gt; Command" toc="default">
          <t>This
            extension does not add any elements to the EPP
            &lt;transfer&gt; command or &lt;transfer&gt; response
            described in the EPP domain mapping
            <xref target="RFC5731" />
            .
          </t>
        </section>
      </section>
      <section title="EPP Transform Commands" toc="default">
        <t>EPP provides five commands to transform objects:
          &lt;create&gt; to create an instance of an object,
          &lt;delete&gt; to delete an instance of an object,
          &lt;renew&gt; to extend the validity period of an object,
          &lt;transfer&gt; to manage object sponsorship changes, and
          &lt;update&gt; to change information associated with an
          object.
        </t>
        <section title="EPP &lt;create&gt; Command" toc="default">
          <t>This
            extension defines additional elements for the EPP
            &lt;create&gt; command described in the EPP domain mapping
            <xref target="RFC5731" />
            .
          </t>
          <t>
            In
            addition to the EPP command elements described in the EPP
            domain mapping
            <xref target="RFC5731" />,
            the &lt;create&gt; command MUST
            contain an &lt;extension&gt;
            element, which MUST contain a
            &lt;create&gt; element
            identifying the kv namespace. The
            &lt;create&gt; element
            contains the following child
            elements:
            <list style="symbols">
              <t>One or more &lt;kvlist&gt; elements that contain the
                list of key-value items to be associated with the
                specified domain. A MANDATORY "name" attribute MUST be
                present to identify the name of the key-value list.
              </t>
            </list>
          </t>
          <t>The
            &lt;kvlist&gt; element contains the following child
            elements:
            <list style="symbols">
              <t>One or more &lt;item&gt; elements that contain the
                value of an item in the list. A MANDATORY "key"
                attribute MUST be present to indicate the key for the
                specified item.
              </t>
            </list>
          </t>
          <figure>
            <preamble>Example &lt;create&gt; command:</preamble>
            <artwork><![CDATA[
C:<?xml version="1.0" encoding="UTF-8"?>
C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0" 
C:  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
C:  xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0 epp-1.0.xsd">
C:  <command>
C:    <create>
C:      <create xmlns="urn:ietf:params:xml:ns:domain-1.0"
C:        xsi:schemaLocation=
C:           "urn:ietf:params:xml:ns:domain-1.0 domain-1.0.xsd">
C:        <name>example.com.au</name>
C:        <registrant>Registrant</registrant>
C:        <contact type="tech">Tech1</contact>
C:        <authInfo>
C:          <pw>SjweDcB84E</pw>
C:        </authInfo>
C:      </create>
C:    </create>
C:    <extension>
C:      <create xmlns="urn:X-ar:params:xml:ns:kv-1.0"
C:        xsi:schemaLocation=
C:           "urn:X-ar:params:xml:ns:kv-1.0 kv-1.0.xsd">
C:        <kvlist name="au">
C:          <item key="eligibilityType">Company</item>
C:          <item key="policyReason">1</item>
C:          <item key="registrantName">My Registrant</item>
C:        </kvlist>
C:      </create>
C:    </extension>
C:    <clTRID>ABC-12345</clTRID>
C:  </command>
C:</epp>
              ]]></artwork>
          </figure>
          <t>No additional elements are defined for the EPP
            &lt;create&gt; response.
          </t>
        </section>
        <section title="EPP &lt;delete&gt; Command" toc="default">
          <t>This
            extension does not add any elements to the EPP
            &lt;delete&gt; command or &lt;delete&gt; response described
            in the EPP domain mapping
            <xref target="RFC5731" />
            .
          </t>
        </section>
        <section title="EPP &lt;renew&gt; Command" toc="default">
          <t>This
            extension does not add any elements to the EPP
            &lt;renew&gt;
            command or &lt;renew&gt; response described in
            the EPP domain
            mapping
            <xref target="RFC5731" />
            .
          </t>
        </section>
        <section title="EPP &lt;transfer&gt; Command" toc="default">
          <t>This
            extension does not add any elements to the EPP
            &lt;transfer&gt; command or &lt;transfer&gt; response
            described in the EPP domain mapping
            <xref target="RFC5731" />
            .
          </t>
        </section>
        <section title="EPP &lt;update&gt; Command" toc="default">
          <t>This
            extension defines additional elements for the EPP
            &lt;update&gt; command described in the EPP domain mapping
            <xref target="RFC5731" />
            .
          </t>
          <t>
            In
            addition to the EPP command elements described in the EPP
            domain mapping
            <xref target="RFC5731" />,
            the &lt;update&gt; command MUST
            contain an &lt;extension&gt;
            element, which MUST contain a
            &lt;create&gt; element
            identifying the kv namespace. The
            &lt;update&gt; element
            contains the following child
            elements:
            <list style="symbols">
              <t>One or more &lt;kvlist&gt; elements that contain the
                list of key-value items to be associated with the
                specified domain. A MANDATORY "name" attribute MUST be
                present to identify the name of the key-value list.
              </t>
            </list>
          </t>
          <t>The
            &lt;kvlist&gt; element contains the following child
            elements:
            <list style="symbols">
              <t>One or more &lt;item&gt; elements that contain the
                value of an item in the list. A MANDATORY "key"
                attribute MUST be present to indicate the key for the
                specified item.
              </t>
            </list>
          </t>
          <figure>
            <preamble>Example &lt;update&gt; command:</preamble>
            <artwork><![CDATA[
C:<?xml version="1.0" encoding="UTF-8"?>
C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0" 
C:  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
C:  xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0 epp-1.0.xsd">
C:  <command>
C:    <update>
C:      <update xmlns="urn:ietf:params:xml:ns:domain-1.0"
C:        xsi:schemaLocation=
C:           "urn:ietf:params:xml:ns:domain-1.0 domain-1.0.xsd">
C:        <name>example.com.au</name>
C:      </update>
C:    </update>
C:    <extension>
C:      <update xmlns="urn:X-ar:params:xml:ns:kv-1.0"
C:        xsi:schemaLocation=
C:           "urn:X-ar:params:xml:ns:kv-1.0 kv-1.0.xsd">
C:        <kvlist name="au">
C:          <item key="eligibilityType">Company</item>
C:          <item key="policyReason">1</item>
C:          <item key="registrantName">New Registrant</item>
C:        </kvlist>
C:      </update>
C:    </extension>
C:    <clTRID>ABC-12345</clTRID>
C:  </command>
C:</epp>
              ]]></artwork>
          </figure>
          <t>No additional elements are defined for the EPP
            &lt;update&gt; response.</t>
        </section>
      </section>
    </section>
    <section title="Formal Syntax" toc="default">
      <t>An EPP object mapping is specified in XML Schema notation. The
        formal syntax presented here is a complete schema representation
        of the object mapping suitable for automated validation of EPP
        XML instances. The BEGIN and END tags are not part of the
        schema;
        they are used to note the beginning and ending of the
        schema for
        URI registration purposes.</t>
      <figure>
        <artwork>
        BEGIN<![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<schema targetNamespace="urn:X-ar:params:xml:ns:kv-1.0"
   xmlns="http://www.w3.org/2001/XMLSchema"
   xmlns:kv="urn:X-ar:params:xml:ns:kv-1.0"
   elementFormDefault="qualified">

   <!--
      Definition of kvlist to be reused in other DTDs
   -->
   <group name="kvlist">
      <sequence>
         <element name="kvlist" type="kv:listType" />
      </sequence>
   </group>

   <!--
      Command extension elements 
    -->
   <element name="create" type="kv:createType" />
   <element name="update" type="kv:updateType" />

   <complexType name="createType">
      <group ref="kv:kvlist" maxOccurs="unbounded" />
   </complexType>

   <complexType name="updateType">
      <group ref="kv:kvlist" maxOccurs="unbounded" />
   </complexType>

   <complexType name="listType">
      <sequence maxOccurs="unbounded">
         <element name="item" type="kv:itemType" />
      </sequence>
      <attribute name="name" type="token" use="required" />
   </complexType>

   <complexType name="itemType">
      <simpleContent>
         <extension base="token">
            <attribute name="key" type="token" use="required" />
         </extension>
      </simpleContent>
   </complexType>

   <!--
      Response extension types 
    -->
   <element name="infData" type="kv:infDataType" />

   <complexType name="infDataType">
      <group ref="kv:kvlist" maxOccurs="unbounded" />
   </complexType>

</schema>
]]>END
        </artwork>
      </figure>
    </section>
    <section title="Internationalization Considerations" toc="default">
      <t>
        EPP is represented in XML, which provides native support for
        encoding information using the Unicode character set and its
        more compact representations, including UTF-8
        <xref target="RFC3629" />
        .
        Conformant XML processors recognize both UTF-8 and UTF-16
        <xref target="RFC2781" />.
        Though XML includes provisions to identify and use
        other
        character encodings through use of an "encoding" attribute
        in an
        &lt;?xml?&gt; declaration, use of UTF-8 is RECOMMENDED in
        environments where parser encoding support incompatibility
        exists.
      </t>
      <t>
        As an extension of the EPP domain mapping
        <xref target="RFC5731" />
        , the
        elements, element content, attributes, and attribute values
        described in this document MUST inherit the internationalization
        conventions used to represent higher-layer domain and core
        protocol structures present in an XML instance that includes
        this extension.
      </t>
    </section>
    <section title="Security Considerations" toc="default">
      <t>
        The mapping extensions described in this document do not
        provide
        any security services beyond those described by EPP
        <xref target="RFC5730" />
        , the EPP domain name mapping
        <xref target="RFC5731" />
        , and protocol
        layers used by EPP. The security considerations
        described in
        these other specifications apply to this
        specification as well.
      </t>
      <t>
        As with other domain object transforms, the EPP transform
        operations described in this document MUST be restricted to the
        sponsoring client as authenticated using the mechanisms
        described in Sections 2.9.1.1 and 7 of <xref target="RFC5730" />
        . Any
        attempt to perform a transform operation on a domain object
        by
        any client other than the sponsoring client MUST be rejected
        with an appropriate EPP authorization error.
      </t>
    </section>
  </middle>
  <back>
    <references title='Normative References'>
    &rfc2119;
    &rfc5730;
    &rfc5731;
    &rfc3629;
    &rfc2781;
    </references>
    <references title='Informative References'>
    &w3crec-xml-20040204;
    &w3crec-xmlschema-1-20041028;
    </references>
  </back>
</rfc>
